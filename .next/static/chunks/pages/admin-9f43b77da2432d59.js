(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{6150:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(3793)}])},684:function(n,e,t){"use strict";var r=t(5893);t(7294);e.Z=function(n){var e=n.children;return(0,r.jsx)("div",{style:{color:"red"},children:e})}},3793:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return T}});var r=t(4051),i=t.n(r),o=t(5893),a=t(7294),s=t(2627),u=t(4231),c=t(9581),l=t(3321),d=t(2280),f=t(8895),m=t(8862),h=t(2797),p=t(5054),v=t(684),y=t(1163),x=t(4021),b=t.n(x),j=t(1248),_=t(6595),g=t(848),w=t(5673),N=(0,g.LC)({reducerPath:"userApi",baseQuery:(0,w.ni)({baseUrl:"https://collage-enquiry-system-chatbot.herokuapp.com/api"}),tagTypes:["user"],endpoints:function(n){return{addQuestion:n.mutation({query:function(n){return{url:"/message",method:"POST",body:n}}})}}}).useAddQuestionMutation,S=t(3508);function k(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function O(n,e,t,r,i,o,a){try{var s=n[o](a),u=s.value}catch(c){return void t(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function q(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function A(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){q(n,e,t[e])}))}return n}function C(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,o=[],a=!0,s=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw i}}return o}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return k(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z={question:""},P=u.Ry({question:u.Z_().required("Required")}),T=function(){var n=(0,j.I0)(),e=(0,y.useRouter)(),t=C(N(),1)[0],r=(0,a.useState)("add"),u=r[0],x=r[1],g=(0,a.useState)([]),w=g[0],k=g[1],q=(0,a.useState)(0),T=q[0],E=q[1],I=(0,a.useState)(0),Q=I[0],B=I[1],R=JSON.parse("".concat(localStorage.getItem("adminTokens")));(null===R||void 0===R?void 0:R.accessToken)||e.push("/adminLogin");(0,a.useEffect)((function(){fetch("https://collage-enquiry-system-chatbot.herokuapp.com/api/messages?limit=".concat(6,"&skip=").concat(Q)).then((function(n){return n.json()})).then((function(n){k(n.result),E(Math.floor(n.total/6)+1)})).catch((function(n){return console.error(n)}))}),[Q]);var J=function(){var e,r=(e=i().mark((function e(r){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:o=e.sent,window.localStorage.setItem("userTokens",JSON.stringify(o)),n((0,_.Rj)(o));case 5:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(n){O(o,r,i,a,s,"next",n)}function s(n){O(o,r,i,a,s,"throw",n)}a(void 0)}))});return function(n){return r.apply(this,arguments)}}();return(0,o.jsxs)("div",{className:b().container,children:[(0,o.jsxs)("div",{className:b().sidebar,children:[(0,o.jsx)("div",{className:b().item,onClick:function(){return x("add")},children:"Add Answer"}),(0,o.jsx)("div",{className:b().item,onClick:function(){return x("view")},children:"View Question"}),(0,o.jsx)("div",{className:b().item,onClick:function(){localStorage.removeItem("adminTokens"),e.push("/")},children:"Logout"})]}),"add"===u?(0,o.jsx)(s.J9,{initialValues:Z,validationSchema:P,onSubmit:J,children:function(n){return(0,o.jsx)("div",{className:b().formContainer,children:(0,o.jsxs)(s.l0,{method:"post",className:b().formBox,children:[(0,o.jsxs)("div",{className:b().input,children:[(0,o.jsx)(c.Z,A({type:"text",id:"question",label:"question",variant:"outlined"},n.getFieldProps("question"),{fullWidth:!0})),(0,o.jsx)(s.Bc,{component:v.Z,name:"question"})]}),(0,o.jsx)("div",{className:b().input,children:(0,o.jsx)(l.Z,{type:"submit",variant:"contained",color:"success",children:"Add Question"})})]})})}}):"view"===u?(0,o.jsx)("div",{className:b().formContainer,children:(0,o.jsxs)("div",{className:b().formBox,style:{marginTop:"10vh"},children:[(0,o.jsx)("div",{className:b().input,style:{overflow:"auto",maxHeight:"70vh"},children:w.map((function(n,e){return(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(f.Z,{expandIcon:(0,o.jsx)(S.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,o.jsx)(m.Z,{children:n.question})}),(0,o.jsx)(h.Z,{children:(0,o.jsx)(m.Z,{children:n.answer})})]},e)}))}),(0,o.jsx)(p.Z,{onChange:function(n,e){return B(e-1)},count:T,size:"small"})]})}):(0,o.jsx)(o.Fragment,{})]})}},4021:function(n){n.exports={container:"admin_container__br5K2",sidebar:"admin_sidebar__VKcJQ",item:"admin_item__rRE_K",formContainer:"admin_formContainer__w1bIN",formBox:"admin_formBox__ccDYS",input:"admin_input__Xg1TA"}}},function(n){n.O(0,[620,53,774,888,179],(function(){return e=6150,n(n.s=e);var e}));var e=n.O();_N_E=e}]);