(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(4804)}])},684:function(e,n,t){"use strict";var r=t(5893);t(7294);n.Z=function(e){var n=e.children;return(0,r.jsx)("div",{style:{color:"red"},children:n})}},4804:function(e,n,t){"use strict";t.r(n);var r=t(4051),o=t.n(r),i=t(5893),s=t(7294),a=t(2627),c=t(4231),u=t(9581),l=t(3321),d=t(2280),h=t(8895),f=t(8862),m=t(2797),p=t(5054),v=t(684),x=t(1163),j=t(6843),_=t.n(j),b=t(3508),y=t(1444);function N(e,n,t,r,o,i,s){try{var a=e[i](s),c=a.value}catch(u){return void t(u)}a.done?n(c):Promise.resolve(c).then(r,o)}function g(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){g(e,n,t[n])}))}return e}var k={question:""},q=c.Ry({question:c.Z_().required("Required")});n.default=function(){var e=(0,x.useRouter)(),n=(0,s.useState)(0),t=n[0],r=n[1],c=(0,s.useState)(0),j=c[0],g=c[1],w="https://collage-enquiry-system-chatbot.herokuapp.com/api",S=(0,s.useState)("add"),C=S[0],O=S[1],P=(0,s.useState)([]),E=P[0],T=P[1],B=JSON.parse("".concat(localStorage.getItem("userTokens")));(null===B||void 0===B?void 0:B.accessToken)||e.push("/login");var A=function(){fetch("https://collage-enquiry-system-chatbot.herokuapp.com/api/messages?limit=".concat(6,"&skip=").concat(j)).then((function(e){return e.json()})).then((function(e){T(e.result),r(Math.floor(e.total/6)+1)})).catch((function(e){return console.error(e)}))};(0,s.useEffect)((function(){A()}),[j]);var I=function(){var e,n=(e=o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(w,"/message"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(){y.Am.success("Question Added Successfully")})).catch((function(e){y.Am.error("Failed"),console.error("Error:",e)}));case 1:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function s(e){N(i,r,o,s,a,"next",e)}function a(e){N(i,r,o,s,a,"throw",e)}s(void 0)}))});return function(e){return n.apply(this,arguments)}}();return(0,i.jsxs)("div",{className:_().container,children:[(0,i.jsxs)("div",{className:_().sidebar,children:[(0,i.jsx)("div",{className:_().item,onClick:function(){return O("add")},children:"Add question"}),(0,i.jsx)("div",{className:_().item,onClick:function(){return O("search")},children:"Search question"}),(0,i.jsx)("div",{className:_().item,onClick:function(){O("all"),A()},children:"All question"}),(0,i.jsx)("div",{className:_().item,onClick:function(){localStorage.removeItem("userTokens"),e.push("/login")},children:"Logout"}),(0,i.jsx)(y.Ix,{})]}),"add"===C?(0,i.jsx)(a.J9,{initialValues:k,validationSchema:q,onSubmit:I,children:function(e){return(0,i.jsx)("div",{className:_().formContainer,children:(0,i.jsxs)(a.l0,{method:"post",className:_().formBox,children:[(0,i.jsxs)("div",{className:_().input,children:[(0,i.jsx)(u.Z,Z({type:"text",id:"question",label:"question",variant:"outlined"},e.getFieldProps("question"),{fullWidth:!0})),(0,i.jsx)(a.Bc,{component:v.Z,name:"question"})]}),(0,i.jsx)("div",{className:_().input,children:(0,i.jsx)(l.Z,{type:"submit",variant:"contained",color:"success",children:"Add Question"})})]})})}}):"search"===C?(0,i.jsx)("div",{className:_().formContainer,children:(0,i.jsxs)("div",{className:_().formBox,children:[(0,i.jsx)("div",{className:_().input,children:(0,i.jsx)(u.Z,{type:"text",id:"question",label:"question",variant:"outlined",fullWidth:!0,onChange:function(e){return n=e.target.value,void fetch("".concat(w,"/messages?search=").concat(n)).then((function(e){return e.json()})).then((function(e){return T(e.result)})).catch((function(e){return console.error(e)}));var n}})}),(0,i.jsx)("div",{className:_().input,children:E.map((function(e,n){return(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(h.Z,{expandIcon:(0,i.jsx)(b.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,i.jsx)(f.Z,{children:e.question})}),(0,i.jsx)(m.Z,{children:(0,i.jsx)(f.Z,{children:e.answer})})]},n)}))})]})}):(0,i.jsx)("div",{className:_().formContainer,children:(0,i.jsxs)("div",{className:_().formBox,style:{marginTop:"10vh"},children:[(0,i.jsx)("div",{className:_().input,style:{overflow:"auto",maxHeight:"70vh"},children:E.map((function(e,n){return(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(h.Z,{expandIcon:(0,i.jsx)(b.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,i.jsx)(f.Z,{children:e.question})}),(0,i.jsx)(m.Z,{children:(0,i.jsx)(f.Z,{children:e.answer})})]},n)}))}),(0,i.jsx)(p.Z,{onChange:function(e,n){return g(n-1)},count:t,size:"small"})]})})]})}},6843:function(e){e.exports={container:"dashboard_container__0kY7W",sidebar:"dashboard_sidebar__KBFYj",item:"dashboard_item__YnqSp",formContainer:"dashboard_formContainer__KfNvD",formBox:"dashboard_formBox___6wXV",input:"dashboard_input__1KkWj"}}},function(e){e.O(0,[620,444,53,774,888,179],(function(){return n=528,e(e.s=n);var n}));var n=e.O();_N_E=n}]);